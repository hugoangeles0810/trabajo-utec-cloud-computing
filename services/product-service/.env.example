# Gamarriando Product Service - RDS Configuration
# Copy this file to .env and update with your actual values

# =============================================================================
# DATABASE CONFIGURATION (RDS Aurora PostgreSQL)
# =============================================================================

# Database connection details (will be updated automatically after deployment)
DATABASE_URL=postgresql://gamarriando:gamarriando123@aurora-cluster-endpoint:5432/gamarriando
DB_HOST=aurora-cluster-endpoint.cluster-xxxxx.us-east-1.rds.amazonaws.com
DB_PORT=5432
DB_NAME=gamarriando
DB_USER=gamarriando
DB_PASSWORD=gamarriando123

# Connection pool configuration for Lambda
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_RECYCLE=3600
DB_POOL_TIMEOUT=30

# =============================================================================
# VPC CONFIGURATION (Required for RDS access)
# =============================================================================

# Security Group IDs (will be created during deployment)
LAMBDA_SECURITY_GROUP_ID=sg-xxxxxxxxx
RDS_SECURITY_GROUP_ID=sg-yyyyyyyyy

# Subnet IDs for Lambda functions (will be created during deployment)
LAMBDA_SUBNET_ID_1=subnet-xxxxxxxxx
LAMBDA_SUBNET_ID_2=subnet-yyyyyyyyy

# =============================================================================
# JWT CONFIGURATION
# =============================================================================

JWT_SECRET_KEY=gamarriando-super-secret-jwt-key-dev
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# =============================================================================
# S3 CONFIGURATION
# =============================================================================

S3_BUCKET_NAME=gamarriando-product-images-dev
S3_REGION=us-east-1

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

DEBUG=false
LOG_LEVEL=INFO
STAGE=dev
REGION=us-east-1

# =============================================================================
# AWS CONFIGURATION
# =============================================================================

# AWS Educate LabRole (provided)
AWS_ROLE_ARN=arn:aws:iam::238034776414:role/LabRole

# =============================================================================
# DEPLOYMENT NOTES
# =============================================================================

# 1. The deploy-rds.sh script will automatically update:
#    - DATABASE_URL with the actual Aurora cluster endpoint
#    - DB_HOST with the actual Aurora cluster endpoint
#    - Security Group IDs and Subnet IDs after VPC creation

# 2. Manual steps required:
#    - Set a strong DB_PASSWORD (minimum 8 characters)
#    - Update JWT_SECRET_KEY for production
#    - Configure S3_BUCKET_NAME if different from default

# 3. After deployment, verify:
#    - Aurora cluster is available
#    - Lambda functions can connect to RDS
#    - Database schema is initialized
#    - API endpoints are responding

# =============================================================================
# PRODUCTION CONFIGURATION EXAMPLE
# =============================================================================

# For production deployment, use these settings:
# STAGE=prod
# DEBUG=false
# LOG_LEVEL=WARNING
# JWT_SECRET_KEY=your-super-secure-production-key
# DB_PASSWORD=your-super-secure-database-password
# S3_BUCKET_NAME=gamarriando-product-images-prod

# ==============================================
# CONFIGURACIÓN DE BASE DE DATOS RDS
# ==============================================

# Host de la base de datos
DB_HOST=your-rds-endpoint.amazonaws.com

# Puerto de PostgreSQL
DB_PORT=5432

# Nombre de la base de datos
DB_NAME=gamarriando

# Usuario de la base de datos
DB_USER=your-db-username

# Contraseña de la base de datos
DB_PASSWORD=your-db-password

# ==============================================
# CONFIGURACIÓN DE CONEXIÓN
# ==============================================

# URL de conexión completa (opcional, para algunas librerías)
DATABASE_URL=postgresql://username:password@host:port/database

# Configuración de pool de conexiones
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Configuración SSL
DB_SSL_MODE=prefer
DB_SSL_CERT_PATH=
DB_SSL_KEY_PATH=
DB_SSL_ROOT_CERT_PATH=

# ==============================================
# CONFIGURACIÓN DE LAMBDA
# ==============================================

# Timeout de conexión para Lambda
DB_CONNECT_TIMEOUT=10
DB_QUERY_TIMEOUT=30

# =============================================================================
# RDS DATA API CONFIGURATION (AWS Recommended for Serverless)
# =============================================================================

# RDS Data API Configuration - Required for Lambda functions
DB_CLUSTER_ARN=arn:aws:rds:us-east-1:YOUR_ACCOUNT_ID:cluster:gamarriando-dev
DB_SECRET_ARN=arn:aws:secretsmanager:us-east-1:YOUR_ACCOUNT_ID:secret:gamarriando-dev-db-credentials
AWS_REGION=us-east-1

# Note: RDS Data API allows Lambda functions to interact with RDS without
# managing database connections, making it ideal for serverless applications.
# These ARNs are automatically created when you deploy RDS with Aurora Serverless.
