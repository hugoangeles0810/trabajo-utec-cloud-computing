# Gamarriando Product Service - RDS Configuration
# Copy this file to .env and update with your actual values

# =============================================================================
# DATABASE CONFIGURATION (RDS Aurora PostgreSQL)
# =============================================================================

# Database connection details (will be updated automatically after deployment)
DATABASE_URL=postgresql://username:password@host:port/database
DB_HOST=aurora-cluster-endpoint.cluster-xxxxx.us-east-1.rds.amazonaws.com
DB_PORT=5432
DB_NAME=database_name
DB_USER=user
DB_PASSWORD=password

# Connection pool configuration for Lambda
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_RECYCLE=3600
DB_POOL_TIMEOUT=30

# Timeout de conexi√≥n para Lambda
DB_CONNECT_TIMEOUT=10
DB_QUERY_TIMEOUT=30

# =============================================================================
# VPC CONFIGURATION (Required for RDS access)
# =============================================================================

# Security Group IDs (will be created during deployment)
LAMBDA_SECURITY_GROUP_ID=sg-xxxxxxxxx
RDS_SECURITY_GROUP_ID=sg-yyyyyyyyy

# Subnet IDs for Lambda functions (will be created during deployment)
LAMBDA_SUBNET_ID_1=subnet-xxxxxxxxx
LAMBDA_SUBNET_ID_2=subnet-yyyyyyyyy

# =============================================================================
# JWT CONFIGURATION
# =============================================================================

JWT_SECRET_KEY=gamarriando-super-secret-jwt-key-dev
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# =============================================================================
# S3 CONFIGURATION
# =============================================================================

S3_BUCKET_NAME=bucket_name
S3_REGION=us-east-1

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

DEBUG=false
LOG_LEVEL=INFO
STAGE=dev
REGION=us-east-1

# =============================================================================
# AWS CONFIGURATION
# =============================================================================

# AWS Educate LabRole (provided)
AWS_ROLE_ARN=arn:aws:iam::238034776414:role/LabRole

# =============================================================================
# DEPLOYMENT NOTES
# =============================================================================

# 1. The deploy-rds.sh script will automatically update:
#    - DATABASE_URL with the actual Aurora cluster endpoint
#    - DB_HOST with the actual Aurora cluster endpoint
#    - Security Group IDs and Subnet IDs after VPC creation

# 2. Manual steps required:
#    - Set a strong DB_PASSWORD (minimum 8 characters)
#    - Update JWT_SECRET_KEY for production
#    - Configure S3_BUCKET_NAME if different from default

# 3. After deployment, verify:
#    - Aurora cluster is available
#    - Lambda functions can connect to RDS
#    - Database schema is initialized
#    - API endpoints are responding

# =============================================================================
# PRODUCTION CONFIGURATION EXAMPLE
# =============================================================================

# For production deployment, use these settings:
# STAGE=prod
# DEBUG=false
# LOG_LEVEL=WARNING
# JWT_SECRET_KEY=your-super-secure-production-key
# DB_PASSWORD=your-super-secure-database-password
# S3_BUCKET_NAME=gamarriando-product-images-prod
